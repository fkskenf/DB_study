# MariaDB, MySQL
> - reference : [TechBlog](https://hyeounstory.tistory.com/135)

# Oracle

> - START WITH / CONNECT BY
>> 1. START WITH 절에 시작 조건을 찾습니다.
>> 2. CONNECT BY 절에 연결조건을 찾습니다.
```java
SELECT [컬럼]...
FROM [테이블]
WHERE [조건]
START WITH [최상위 조건]
CONNECT BY [NOCYCLE][PRIOR 계층형 구조 조건];
```
```java
SELECT 
DEPT_NAME,
DEP_CD,
PARENT_CD,
LEVEL
FROM DEP 
START WITH PARENT_CD IS NULL --최상위노드 설정,
CONNECT BY PRIOR DEP_CD = PARENT_CD;--부모노드와 자식노드 연결
```

# '자식 > 부모'순의 depth 표현 
```sql

WITH RECURSIVE cte AS
(
	SELECT
		no
		, parent_no
		, level  
	FROM
		test_table
	where
		no = '10053'
	UNION ALL
	SELECT
		t1.no
		, t1.parent_no
		, t1.level 
	FROM
		test_table t1
	INNER JOIN cte 
	ON t1.no = cte.parent_no
)
SELECT 
	(
		SELECT 
			group_concat(t2.nm SEPARATOR ' > ') AS depth
		FROM (
			SELECT
				cte.nm
			FROM
				cte
			ORDER BY level ASC
			LIMIT 20 -- 최대 DEPTH (서비쿼리 order by 이슈로 추가)
		) t2
	) AS depth
	, cte.*
FROM 
	cte
WHERE 
	cte.no = '10053'
```

![image](https://user-images.githubusercontent.com/60438691/220570961-5a47acde-0772-44c9-9fcb-4341798871ca.png)

