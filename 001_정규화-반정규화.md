# 정규화
- 종속 관계를 분석하여 여러개의 릴레이션으로 분해하는 과정 
- 분해과정을 통해 이상 문제들을 해결한다. (삽입이상, 삭제이상, 갱신이상)

1. 제 1정규화(First Normal Form, 1NF)
> - 어떤 Relation에 속한 모든 Domain이 원자값만으로 되어있다.
> 1. 모든 attribute에 반복되는 그룹이 나타나지 않는다.
> 2. 기본키를 사용하여 관련 데이터의 각 집합을 고유하게 식별할수 있어야 한다.
2. 제 2정규화(Second Normal Form, 2NF)
> - 기본키가 아닌 모든 속성이 기본키에 대해 완전 함수적 종속을 만족하는 정규형 (부분적 함수 종속을 제거한 정규형)
>> 1. 완전함수종속 : X -> Y 일 경우 완전함수적 종속
>> 2. 부분함수종속 : 기본키가 복합키 일 경우 X1, X2 중 하나만으로도 Y의 값을 결정할 때 부분 함수적 종속
>> 3. 이행적함수종속 : X -> Y인데, Y -> Z 다. 결국 X -> Z인 것을 알 수 있는 경우
3. 제 3정규화(Third Normal Form, 3NF)
> - 기본키가 아닌 모든 속성이 기본키에 대해 이행적 함수 종속 관계를 만족하지 않는 정규형
4. BCNF (Boyce-Codd 정규형)
> - BCNF는 모든 결정자는 후보키이어야 한다. 
> 1. 에시) 학생+과목+교수+학점
> 2. 후보키는 수퍼키중에서 최소성을 만족하는건데 이 경우 {학생, 과목}이 후보키가 된다. 근데 해당 테이블의 경우 교수가 결정자가 된다.
> 3. 그 이유는, 교수가 한 과목만 강의 할 수 있다고 가정할 때, 교수가 정해지면 과목이 결정되기 때문이다. 이경우 BCNF를 만족하지 못한다.
> 4. 이를 해결하기 위해서는 테이블을 분리해야 한다. (교수+과목, 학생+과목+학점)
5. 제4정규형(4NF)
> - 애트리뷰트가 값이 원자값이 아닌 값을 여러개 갖는 릴레이션을 분해하여 애트리뷰트가 원자값을 갖도록 하는 정규형이다.
6. 제5정규형(5NF)
> - 여러개의 릴레이션으로 한 릴레이션을 분해했을 때, 모든 나눠진 릴레이션이 원래 릴레이션의 슈퍼키이며,
> - 릴레이션을 더 분해할 경우, 기존 릴레이션의 정보가 손실되기 때문에 더 이상 릴레이션이 분해가 될 수 없는 경우를 말한다.

## 정규화 특징
- 정규화를 하면 정합성과 데이터무결성이 보장된다. 
- 반면, 테이블이 복잡해지고 성능이 떨어질 수 있다. 
- 그에 따라 입력(Create), 수정(Update), 삭제(Delete)의 성능은 향상되고 조회(Read)의 경우 나빠질수도 있고 좋아질 수도 있다.
- Relation의 분리로 인해 Relation 간의 연산(JOIN 연산)이 많아져서 질의에 대한 응답 시간이 느려지게 된다.

# 반정규화
- 데이터의 성능 향상을 위하여, 데이터 중복을 허용하고 조인을 줄여 데이터베이스 성능 향상하는 방법

1. 반정규화를 수행하는 경우
> 1. 정규화에 충실하여 종속성, 활용성은 향상되었지만, 수행속도가 느려진 경우
> 2. 다량의 범위를 자주 처리해야하는 경우
> 3. 특정 범위의 데이터만 자주 처리하는 경우
> 4. 요약/집계 정보가 자주 요구되는 경우

2. 테이블 반정규화 기법
> 1. 테이블 병합
>> - 조인되는 경우가 많아서 테이블을 합치는 것이 성능향상에 효율적일 경우에 사용
>> 1. 1:1 관계 테이블 병합
>> 2. 1:M 관계 테이블 병합
>> 3. 슈퍼/서브 타입 관계 테이블 병합

> 2. 테이블 분할
>> - 테이블에서 특정 속성들만 집중적으로 접근할 경우 분할
>> 1. 수직분할 : 특정 속성들만 접근이 잦을 경우 칼럼을 쪼개서 테이블을 만듦
>> 2. 수평분할 : 스키마는 동일하지만, 그 데이터 값을 이용하는 방법이 row별로 구분지어지는 경우 (연도별 이력 조회 등)
> 3. 테이블 추가
>> 1. 중복테이블 추가 : 다른 업무이거나 서버가 다른 경우 동일한 테이블 구조를 중복하여 원격조인을 제거하여 성능 향상
>> 2. 통계테이블 추가: SUM, AVG등을 미리 수행하여 자동 계산해둠으로써 조회 시 성능 향상
>> 3. 이력테이블 추가: 마스터 테이블에 존재하는 레코드를 중복하여 이력테이블에 존재하는 방법
>> 4. 부분테이블 추가: 하나의 테이블의 전체의 칼럼 중 자주 이용하는 집중화된 칼럼들이 있을 때 디스크 I/O를 줄이기 위해 해당 칼럼들을 모아 놓은 별도의 반정규화 된 테이블

## 반정규화 특징  
- 반정규화를 하면 테이블이 단순화되며 성능이 향상되는 반면, 정합성과 데이터무결성이 보장되지 않을 수있다.
- 반 정규화는 의도적으로 중복을 만들어 검색(Read) 성능을 향상시킨다. 
- 하지만 속성이 각기 다른 테이블에 중복되어 나타나기 때문에 입력(Create), 수정(Update), 삭제(Delete)의 성능은 낮아진다.
